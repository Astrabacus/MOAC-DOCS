

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>MicroChain SCS Miner &mdash; moac-core-master  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="MicroChain User" href="MicroChainUsers.html" />
    <link rel="prev" title="DAPP Developers" href="MicroChainDAPPDeveloper.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> moac-core-master
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="HOME.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">About MOAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="accessWallet.html">How to Access Your Wallet</a></li>
<li class="toctree-l1"><a class="reference internal" href="Chain3.html">Chain3 JavaScript API</a></li>
<li class="toctree-l1"><a class="reference internal" href="checkBalance.html">Checking the Balance of Your Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="Commands.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Console.html">Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="Design.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="Differences-Between-Wallet-Types.html">Differences Between Wallet Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="ERC20.html">ERC20 Token</a></li>
<li class="toctree-l1"><a class="reference internal" href="ERC721.html">ERC721 Token</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQs.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="How-To-Create-a-Wallet.html">How-To-Create-a-Wallet</a></li>
<li class="toctree-l1"><a class="reference internal" href="JSON-RPC.html">JSON-RPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="MoveToMoac.html">Move to Moac</a></li>
<li class="toctree-l1"><a class="reference internal" href="protectFunds.html">Protecting Yourself and Your Funds</a></li>
<li class="toctree-l1"><a class="reference internal" href="RPC.html">JSON RPC API</a></li>
<li class="toctree-l1"><a class="reference internal" href="saveAndBackup.html">Safe Storage of Backups</a></li>
<li class="toctree-l1"><a class="reference internal" href="SCS.html">SCS</a></li>
<li class="toctree-l1"><a class="reference internal" href="SCSCreateSteps.html">MOAC Pizza Alpha (Pangu 0.8.3 prerelease)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="VNODE.html">MOAC VNODE</a></li>
<li class="toctree-l1"><a class="reference internal" href="MicroChainDAPPDeveloper.html">DAPP Developers</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">MicroChain SCS Miner</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a1-download-scs-program-or-power-up-a-scs-hardware-miner">A1. Download SCS program ( Or power up a SCS hardware miner)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a2-cusomize-userconfig-json">A2. Cusomize userconfig.json</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a3-start-scs">A3. Start SCS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a4-register-the-scs-into-a-scs-pool">A4. Register the SCS into a SCS pool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="MicroChainUsers.html">MicroChain User</a></li>
<li class="toctree-l1"><a class="reference internal" href="MicroChainVNODEProxy.html">VNODE-PROXY</a></li>
<li class="toctree-l1"><a class="reference internal" href="TXdebug.html">TXdebug</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">moac-core-master</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>MicroChain SCS Miner</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/MicroChainSCSMiner.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="microchain-scs-miner">
<h1>MicroChain SCS Miner<a class="headerlink" href="#microchain-scs-miner" title="Permalink to this headline">¶</a></h1>
<p>Please follow these steps to start your MicroChain mining:</p>
<div class="section" id="a1-download-scs-program-or-power-up-a-scs-hardware-miner">
<h2>A1. Download SCS program ( Or power up a SCS hardware miner)<a class="headerlink" href="#a1-download-scs-program-or-power-up-a-scs-hardware-miner" title="Permalink to this headline">¶</a></h2>
<p>The initial SCS program has following files: README - A txt file
contains instructions; config/userconfig.json - Configura file used with
SCS, need to be customized before start SCS; scsserver/scsserver -
Executable program of SCS</p>
</div>
<div class="section" id="a2-cusomize-userconfig-json">
<h2>A2. Cusomize userconfig.json<a class="headerlink" href="#a2-cusomize-userconfig-json" title="Permalink to this headline">¶</a></h2>
<p>The conten of the userconfig.json is as following:</p>
<ol class="arabic simple">
<li>VnodeServiceCfg：The VNODE IP and port SCS connects to. Each SCS
needs to connect a VNODE to communicate with the MotherChain. You can
setup a local VNODE or use a truste VNODE from other sources;</li>
<li>DataDir：SCS data directory that holding the MicroChain data. Default
is “./scsdata”;</li>
<li>LogPath：SCS log directory, default is “./logs”;</li>
<li>Beneficiary：Account holds the MicroChain mining rewards. Please
don’t use the SCS account for this. We suggest you create this
account separatly and don’t put the keystore file on SCS.</li>
<li>VnodeChainId：network id with the MotherChain. Testnet = 101 and
mainnet = 99. If you have a custome network, you need to make sure
the vnode connect with has the same network id.</li>
<li>Capability: desposit limit for a MicroChain. Since each MicroChain
requires some desposit to join, you can set this number and only join
the MicroChain with deposit requirement less than this limit.</li>
<li>ReconnectInterval: If the connection is lost with vnode, SCS will try
to connect with the vnode again. This is the number of seconds
between each connection with vnode.</li>
</ol>
</div>
<div class="section" id="a3-start-scs">
<h2>A3. Start SCS<a class="headerlink" href="#a3-start-scs" title="Permalink to this headline">¶</a></h2>
<p>Command options (SCS -h)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>-p [psd]           Start SCS with a password for the scsid keystore，default password is &quot;moacscsofflineaccountpwd&quot;
-rpcaddr [addr]    SCS start with rpc ip
-rpcport [port]    SCS start with rpc port
</pre></div>
</div>
<p>After the first start，SCS generates a keystore with a password (default
or provided by user). The address of this keystore is the scsid. This
address won’t receive rewards. If user want to use a different scsid,
should remove the keysore file and restart the SCS.</p>
<p>SCS also has a rpc port. Currently the RPC only has monitoring services
for DAPP developers.</p>
</div>
<div class="section" id="a4-register-the-scs-into-a-scs-pool">
<h2>A4. Register the SCS into a SCS pool<a class="headerlink" href="#a4-register-the-scs-into-a-scs-pool" title="Permalink to this headline">¶</a></h2>
<p>To participate in the MicroChain, SCS need to register itself into a SCS
pool. When it registers, the SCS need to pay deposit as required by the
SCS pool (defined in subchainprotocolbase.sol). After it is registered,
it need to wait for some blocks (default is 50 blocks) to be chosen by
MicroChains.</p>
<p>One SCS can register multiple MicroChains.</p>
<p>Javascript method to register the SCS: (used under VNODE console)</p>
<div class="code javascript highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="n">protocolRegister</span><span class="p">(</span><span class="n">baseAddr</span><span class="p">,</span><span class="n">basePasswd</span><span class="p">,</span><span class="n">protocolAddr</span><span class="p">,</span><span class="n">scsAddr</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">chain3</span><span class="o">.</span><span class="n">personal</span><span class="o">.</span><span class="n">unlockAccount</span><span class="p">(</span><span class="n">baseAddr</span><span class="p">,</span> <span class="n">basePasswd</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">sendtx</span><span class="p">(</span><span class="n">baseAddr</span><span class="p">,</span> <span class="n">protocolAddr</span><span class="p">,</span> <span class="s1">&#39;10&#39;</span><span class="p">,</span><span class="s1">&#39;0x4420e486000000000000000000000000&#39;</span> <span class="o">+</span> <span class="n">scsAddr</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Explainations</p>
<ul class="simple">
<li>baseAddr、basePasswd：MOAC VNODE account used to send TX;</li>
<li>protocolAddr：The subchainprotocolbase contract address;</li>
<li>scsAddr：scsid address, saved in “…/scsserver/scskeystore”;</li>
<li>deposit: amount of MOAC to send to pools to join MicroChains;</li>
<li>data：‘0x4420e486’ is a constant used to call the MicroChain. It was
from the subchainprotocolbase function ‘register(address scs)’ .
Don’t change it unless you know what you are doing here!</li>
</ul>
<p>Examples:</p>
<p>register SCS</p>
<div class="code javascript highlight-default notranslate"><div class="highlight"><pre><span></span>protocolRegister (&#39;0x1b9ce7e4f1.......e38913a56cd986786&#39;,
‘123’,
&#39;0x09f0dfc09b......0b85e5189a7493671&#39;,
&#39;f687272ae00f8cea......37dd9be30329d8cf&#39;)//without prefix &#39;0x&#39;
</pre></div>
</div>
<p>Send a transaction</p>
<div class="code javascript highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="n">sendtx</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">tgtaddr</span><span class="p">,</span> <span class="n">amount</span><span class="p">,</span> <span class="n">strData</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">chain3</span><span class="o">.</span><span class="n">mc</span><span class="o">.</span><span class="n">sendTransaction</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="n">from</span><span class="p">:</span> <span class="n">src</span><span class="p">,</span>
            <span class="n">value</span><span class="p">:</span><span class="n">chain3</span><span class="o">.</span><span class="n">toSha</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span><span class="s1">&#39;mc&#39;</span><span class="p">),</span>
            <span class="n">to</span><span class="p">:</span> <span class="n">tgtaddr</span><span class="p">,</span>
            <span class="n">gas</span><span class="p">:</span> <span class="s2">&quot;9000000&quot;</span><span class="p">,</span>
            <span class="n">gasPrice</span><span class="p">:</span> <span class="n">chain3</span><span class="o">.</span><span class="n">mc</span><span class="o">.</span><span class="n">gasPrice</span><span class="p">,</span>
            <span class="n">data</span><span class="p">:</span> <span class="n">strData</span>
        <span class="p">});</span>

    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;sending from:&#39;</span> <span class="o">+</span>   <span class="n">src</span> <span class="o">+</span> <span class="s1">&#39; to:&#39;</span> <span class="o">+</span> <span class="n">tgtaddr</span>  <span class="o">+</span> <span class="s1">&#39; with data:&#39;</span> <span class="o">+</span> <span class="n">strData</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>OK, now SCS miner finished setup and you can sit back and wait for your
rewards. All the rewards can be seen after a MicroChain flushed its data
into the MotherChain and you can see the balances changes in the
Beneficiary account address.</p>
<p>FAQ:</p>
<ol class="arabic simple">
<li>What’s the deposit for?</li>
</ol>
<p>The process for a SCS node to join a microChain is: make a safety
deposit and register in the SCS pool. The amount of the deposit is a
parameter that can be set in the microChain protocol. SCS cannot choose
the microChain by itself.</p>
<p>The microChain will choose in the SCS pool to form the microChain
validators. By default, this process is random. The microChain creator
can also change the selection process and only allow specific SCSs to
join. When microChain generate a new block, if a SCS made bad decision,
it will be punished with penalty of the deposit. The microChain will
drop a SCS if it made many bad decisions.</p>
<ol class="arabic" start="2">
<li><p class="first">How secure are microchains against 51% attack? Or are there different
security measures applied on microchain level?</p>
<p>Generally there are two ways to prevent inside attackers in a public
microChain. First, all the SCS join the SCS pool need to pay some
deposits and will be kicked out of the microChain if it made enough
bad decisions. This can cost the attacker more than they can earn in
a public microChain. Second, the microChain was formed by randomly
choosing SCSs from the SCS pool. Thus, it is very hard for the
attacker to get enough SCSs to do the 51% attack (33% for PBFT). For
a SCSs pool with 100 nodes, the attackers may need 51 nodes to
perform the 51% attack for a microchip with only 20 nodes.</p>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="MicroChainUsers.html" class="btn btn-neutral float-right" title="MicroChain User" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="MicroChainDAPPDeveloper.html" class="btn btn-neutral" title="DAPP Developers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, MOAC foundation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>